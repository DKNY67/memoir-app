<!-- Memoir v2.1 - fixed localStorage - 2026-02-18 -->
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memoir ‚Äî Abadikan Setiap Momen</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;1,400;1,500&family=Jost:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --blush:#F2E8E1; --rose:#C4846A; --gold:#B8976A;
  --deep:#2C1F1A; --warm:#8C5E4A; --paper:#FAF5F0; --soft:#E8D8CF;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--paper);color:var(--deep);font-family:'Jost',sans-serif;font-weight:300;min-height:100vh;}

/* grain */
body::after{content:'';position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");pointer-events:none;z-index:9999;opacity:0.35;}

.page{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 24px;position:relative;overflow:hidden;}

/* bg orbs */
.page::before{content:'';position:absolute;inset:0;background:
  radial-gradient(ellipse 70% 50% at 15% 85%,rgba(196,132,106,.15) 0%,transparent 60%),
  radial-gradient(ellipse 50% 60% at 85% 15%,rgba(184,151,106,.12) 0%,transparent 60%),
  var(--blush);}

.brand{position:relative;z-index:2;text-align:center;margin-bottom:64px;animation:fadeUp .8s ease both;}
.brand-name{font-family:'Playfair Display',serif;font-size:clamp(42px,8vw,80px);font-weight:400;line-height:1;}
.brand-name em{font-style:italic;color:var(--rose);}
.brand-sub{font-size:12px;letter-spacing:.25em;text-transform:uppercase;color:var(--warm);margin-top:12px;}

.card-grid{position:relative;z-index:2;display:grid;grid-template-columns:1fr 1fr;gap:20px;max-width:640px;width:100%;animation:fadeUp .8s .15s ease both;}
@media(max-width:520px){.card-grid{grid-template-columns:1fr;}}

.action-card{background:white;border:1px solid var(--soft);padding:36px 32px;cursor:pointer;transition:all .3s;text-align:left;}
.action-card:hover{border-color:var(--rose);transform:translateY(-4px);box-shadow:0 12px 32px rgba(196,132,106,.15);}
.action-card.primary{background:var(--deep);border-color:var(--deep);color:var(--blush);}
.action-card.primary:hover{background:#3d2b24;}
.card-icon{font-size:28px;margin-bottom:16px;display:block;}
.card-title{font-family:'Playfair Display',serif;font-size:22px;font-weight:400;margin-bottom:8px;}
.action-card.primary .card-title{color:var(--blush);}
.card-desc{font-size:13px;line-height:1.7;color:var(--warm);}
.action-card.primary .card-desc{color:rgba(242,232,225,.65);}

.divider-text{position:relative;z-index:2;margin:24px 0;font-size:11px;letter-spacing:.2em;color:var(--soft);text-transform:uppercase;animation:fadeUp .8s .25s ease both;}

.join-box{position:relative;z-index:2;max-width:640px;width:100%;animation:fadeUp .8s .3s ease both;}
.join-inner{background:white;border:1px solid var(--soft);padding:32px;display:flex;gap:12px;align-items:flex-end;}
.join-field{flex:1;}
.join-field label{display:block;font-size:10px;letter-spacing:.2em;text-transform:uppercase;color:var(--warm);margin-bottom:8px;}
.join-field input{width:100%;border:none;border-bottom:2px solid var(--soft);padding:10px 0;font-family:'Playfair Display',serif;font-size:18px;color:var(--deep);outline:none;background:transparent;transition:border-color .2s;}
.join-field input:focus{border-bottom-color:var(--rose);}
.join-field input::placeholder{color:var(--soft);font-style:italic;}
.btn-join{background:var(--rose);color:white;border:none;padding:12px 28px;font-family:'Jost',sans-serif;font-size:11px;letter-spacing:.15em;text-transform:uppercase;cursor:pointer;transition:background .2s;white-space:nowrap;}
.btn-join:hover{background:var(--warm);}

.footer-note{position:relative;z-index:2;margin-top:48px;font-size:11px;letter-spacing:.1em;color:var(--soft);animation:fadeUp .8s .4s ease both;}

/* Modal create event */
.overlay{position:fixed;inset:0;background:rgba(44,31,26,.88);z-index:1000;display:flex;align-items:center;justify-content:center;padding:24px;opacity:0;pointer-events:none;transition:opacity .3s;}
.overlay.open{opacity:1;pointer-events:all;}
.modal{background:var(--paper);max-width:480px;width:100%;padding:48px 40px;transform:translateY(20px);transition:transform .3s;max-height:90vh;overflow-y:auto;}
.overlay.open .modal{transform:translateY(0);}
.modal h2{font-family:'Playfair Display',serif;font-size:28px;font-weight:400;margin-bottom:6px;}
.modal-sub{font-size:13px;color:var(--warm);margin-bottom:32px;}
.field{margin-bottom:20px;}
.field label{display:block;font-size:10px;letter-spacing:.2em;text-transform:uppercase;color:var(--warm);margin-bottom:8px;}
.field input,.field textarea,.field select{width:100%;background:white;border:1px solid var(--soft);border-bottom:2px solid var(--gold);padding:12px 16px;font-family:'Jost',sans-serif;font-size:15px;color:var(--deep);outline:none;transition:border-color .2s;}
.field input:focus,.field textarea:focus{border-bottom-color:var(--rose);}
.field textarea{resize:vertical;min-height:70px;}
.field-row{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
.btn-full{width:100%;background:var(--deep);color:var(--blush);border:none;padding:16px;font-family:'Jost',sans-serif;font-size:12px;letter-spacing:.15em;text-transform:uppercase;cursor:pointer;transition:background .2s;margin-top:8px;}
.btn-full:hover{background:var(--rose);}
.btn-cancel{width:100%;background:transparent;color:var(--warm);border:1px solid var(--soft);padding:13px;font-family:'Jost',sans-serif;font-size:12px;letter-spacing:.15em;text-transform:uppercase;cursor:pointer;margin-top:8px;}

.toast{position:fixed;bottom:32px;left:50%;transform:translateX(-50%) translateY(80px);background:var(--deep);color:var(--blush);padding:14px 28px;font-size:12px;letter-spacing:.1em;z-index:9998;transition:transform .4s;white-space:nowrap;}
.toast.show{transform:translateX(-50%) translateY(0);}

@keyframes fadeUp{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
</style>
</head>
<body>

<div class="page">
  <div class="brand">
    <div class="brand-name">Mem<em>oir</em></div>
    <div class="brand-sub">Abadikan Setiap Momen Bersama</div>
  </div>

  <div class="card-grid">
    <div class="action-card primary" onclick="openCreate()">
      <span class="card-icon">‚ú¶</span>
      <div class="card-title">Buat Acara Baru</div>
      <div class="card-desc">Wedding, ulang tahun, reuni, atau acara apapun</div>
    </div>
    <div class="action-card" onclick="document.getElementById('join-code').focus()">
      <span class="card-icon">üîó</span>
      <div class="card-title">Buka Acara</div>
      <div class="card-desc">Masukkan kode atau link dari undangan</div>
    </div>
  </div>

  <div class="divider-text">‚Äî atau masukkan kode acara ‚Äî</div>

  <div class="join-box">
    <div class="join-inner">
      <div class="join-field">
        <label>Kode Acara</label>
        <input type="text" id="join-code" placeholder="contoh: dikin-eka" oninput="this.value=this.value.toLowerCase().replace(/[^a-z0-9-]/g,'')">
      </div>
      <button class="btn-join" onclick="joinEvent()">Buka ‚Üí</button>
    </div>
  </div>

  <div class="footer-note">Tidak perlu daftar ¬∑ Langsung pakai ¬∑ Gratis</div>
</div>

<!-- CREATE MODAL -->
<div class="overlay" id="create-overlay" onclick="closeCreate(event)">
  <div class="modal">
    <h2>Buat Acara Baru</h2>
    <p class="modal-sub">Isi detail acara kamu ‚ú¶</p>

    <div class="field">
      <label>Jenis Acara</label>
      <select id="event-type" onchange="updatePlaceholders()">
        <option value="wedding">üíç Wedding / Pernikahan</option>
        <option value="birthday">üéÇ Ulang Tahun</option>
        <option value="reunion">ü§ù Reuni</option>
        <option value="graduation">üéì Wisuda</option>
        <option value="other">‚ú¶ Lainnya</option>
      </select>
    </div>

    <div class="field-row">
      <div class="field">
        <label id="name1-label">Nama (Pria)</label>
        <input type="text" id="event-name1" placeholder="Dikin">
      </div>
      <div class="field" id="name2-wrap">
        <label id="name2-label">Nama (Wanita)</label>
        <input type="text" id="event-name2" placeholder="Eka">
      </div>
    </div>

    <div class="field-row">
      <div class="field">
        <label>Tanggal</label>
        <input type="date" id="event-date">
      </div>
      <div class="field">
        <label>Lokasi</label>
        <input type="text" id="event-location" placeholder="Jakarta">
      </div>
    </div>

    <div class="field">
      <label>Password Admin (opsional)</label>
      <input type="password" id="event-password" placeholder="Untuk halaman admin kamu">
    </div>

    <div class="field">
      <label>Kode Acara (URL)</label>
      <input type="text" id="event-slug" placeholder="dikin-eka-2024" oninput="this.value=this.value.toLowerCase().replace(/[^a-z0-9-]/g,'')">
      <div style="font-size:11px;color:var(--warm);margin-top:6px;letter-spacing:.05em;" id="slug-preview"></div>
    </div>

    <button class="btn-full" onclick="createEvent()">Buat Acara ‚ú¶</button>
    <button class="btn-cancel" onclick="closeCreateBtn()">Batal</button>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
function openCreate(){
  document.getElementById('create-overlay').classList.add('open');
  document.body.style.overflow='hidden';
  document.getElementById('event-date').value=new Date().toISOString().split('T')[0];
  updateSlugPreview();
}
function closeCreate(e){if(e.target===document.getElementById('create-overlay'))closeCreateBtn();}
function closeCreateBtn(){document.getElementById('create-overlay').classList.remove('open');document.body.style.overflow='';}

function updatePlaceholders(){
  const t=document.getElementById('event-type').value;
  const wrap2=document.getElementById('name2-wrap');
  const l1=document.getElementById('name1-label');
  const l2=document.getElementById('name2-label');
  const i1=document.getElementById('event-name1');
  const i2=document.getElementById('event-name2');
  if(t==='wedding'){wrap2.style.display='';l1.textContent='Nama (Pria)';l2.textContent='Nama (Wanita)';i1.placeholder='Dikin';i2.placeholder='Eka';}
  else if(t==='birthday'){wrap2.style.display='none';l1.textContent='Nama';i1.placeholder='Nama orang';}
  else if(t==='reunion'){wrap2.style.display='none';l1.textContent='Nama Grup/Angkatan';i1.placeholder='SMA 3 Angkatan 2010';}
  else if(t==='graduation'){wrap2.style.display='none';l1.textContent='Nama Wisudawan';i1.placeholder='Nama lengkap';}
  else{wrap2.style.display='none';l1.textContent='Nama Acara';i1.placeholder='Nama acara';}
  generateSlug();
}

function generateSlug(){
  const n1=document.getElementById('event-name1').value.trim();
  const n2=document.getElementById('event-name2').value.trim();
  const date=document.getElementById('event-date').value;
  const year=date?date.split('-')[0]:'';
  let slug='';
  if(n1&&n2) slug=n1+'-'+n2+(year?'-'+year:'');
  else if(n1) slug=n1+(year?'-'+year:'');
  slug=slug.toLowerCase().replace(/\s+/g,'-').replace(/[^a-z0-9-]/g,'');
  document.getElementById('event-slug').value=slug;
  updateSlugPreview();
}

function updateSlugPreview(){
  const slug=document.getElementById('event-slug').value;
  const base=window.location.origin+window.location.pathname.replace('index.html','');
  document.getElementById('slug-preview').textContent=slug?'üîó '+base+'event.html?id='+slug:'';
}

['event-name1','event-name2','event-date'].forEach(id=>{
  document.getElementById(id)?.addEventListener('input',generateSlug);
});
document.getElementById('event-slug').addEventListener('input',updateSlugPreview);

function createEvent(){
  const slug=document.getElementById('event-slug').value.trim();
  const name1=document.getElementById('event-name1').value.trim();
  const name2=document.getElementById('event-name2').value.trim();
  const date=document.getElementById('event-date').value;
  const location=document.getElementById('event-location').value.trim();
  const password=document.getElementById('event-password').value;
  const type=document.getElementById('event-type').value;

  if(!slug){showToast('Isi kode acara dulu ‚ú¶');return;}
  if(!name1){showToast('Isi nama dulu ‚ú¶');return;}

  const eventData={
    id:slug, type, name1, name2, date, location, password,
    createdAt:new Date().toISOString()
  };

  // Save event to localStorage
  let events=[];
  try{ events=JSON.parse(localStorage.getItem('memoir-events')||'[]'); }catch(e){}

  if(events.find(e=>e.id===slug)){
    showToast('Kode sudah dipakai, coba yang lain');return;
  }
  events.push(eventData);
  localStorage.setItem('memoir-events', JSON.stringify(events));
  localStorage.setItem('memoir-event-'+slug, JSON.stringify(eventData));

  closeCreateBtn();
  window.location.href='event.html?id='+slug+'&admin=1&pass='+encodeURIComponent(password);
}

function joinEvent(){
  const code=document.getElementById('join-code').value.trim();
  if(!code){showToast('Masukkan kode acara dulu');return;}
  window.location.href='event.html?id='+code;
}

function showToast(msg){
  const t=document.getElementById('toast');
  t.textContent=msg;t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),3000);
}

// check url param (join via link)
const urlParams=new URLSearchParams(window.location.search);
const joinId=urlParams.get('join');
if(joinId){window.location.href='event.html?id='+joinId;}
</script>
</body>
</html>
